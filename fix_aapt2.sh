#!/bin/bash
# –ü—É—Ç—å –∫ —Ç–≤–æ–µ–º—É —Ä–∞–±–æ—á–µ–º—É aapt2
WORKING_AAPT2=$(which aapt2)

echo "üê∂ –°—Ç–æ—Ä–æ–∂–µ–≤–æ–π –ø–µ—Å –∑–∞–ø—É—â–µ–Ω. –ò—â—É –±–∏—Ç—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏..."
while true; do
  # –ò—â–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã aapt2 –≤ –∫–µ—à–∞—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
  find ~/.gradle/caches/transforms-3 -name "aapt2" -type f 2>/dev/null | while read -r file; do
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä –∏–ª–∏ —Ç–∏–ø, —á—Ç–æ–±—ã –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–∏—à–Ω–∏–π —Ä–∞–∑
    # –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Å—Å—ã–ª–∫–∞ –∏ –Ω–µ –Ω–∞—à —Ñ–∞–π–ª - –∑–∞–º–µ–Ω—è–µ–º
    cp -f "$WORKING_AAPT2" "$file" 2>/dev/null
  done
  sleep 0.5 # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤–∞–∂–¥—ã –≤ —Å–µ–∫—É–Ω–¥—É
done
